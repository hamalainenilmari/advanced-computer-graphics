# CS-E5520 Advanced Computer Graphics, Spring 2025
# Lehtinen / Härkönen, Timonen
#
# Assignment 2: Radiosity

Student name: Ilmari Hämäläinen
Student number: 894931

# Which parts of the assignment did you complete? Mark them 'done'.
# You can also mark non-completed parts as 'attempted' if you spent a fair amount of
# effort on them. If you do, explain the work you did in the problems/bugs section
# and leave your 'attempt' code in place (commented out if necessary) so we can see it.

R1 Integrate old raytracing code (1p): done
            R2 Area light source (3p): done
                    R3 Radiosity (6p): done

# Did you do any extra credit work?

(Describe what you did and, if there was a substantial amount of work involved, how you did it. If your extra features are interactive or can be toggled, describe how to use them.)

1. Implemented extra Visualizing bounces separately (2p). Added slider to GUI for choosing bounce 0,1,...8 to render individually. 
Added also two buttons, one for choosing to render the chosen bounce, and one return to normal mode, i.e. render total bounce results.
For scenes with lots of primitives, the changing of bounce to visualize can take a while.

2. Implemented extra from assigment 1: BVH Surface Area Heuristic (3p). Added toggle button to GUI to create the BVH with the new SAH or the previous Spatial Median.
I tested the rendering performance with the radiosity computing with 2 bounces. Rendering the conference.bin scene with Reference.exe using BVHs generated by my solution. 
My traversal is not as good as the reference, and to point out the difference in the created BVH, I tested with the reference traversal.

Some results:

Time to render scene with my Spatial Median BVH:

* 3.00s

Time to render scene with Reference BVH:

* 1.27s

Time to render scene with my BVH by SAH with different minimum amount of triangles per leaf:

* 30: 2.20s
* 25: 2.12s
* 20: 2.00s
* 15: 1.37s
* 10: 1.38s

Because of the results, I chose to use minimum triangle amount of 13. I got kinda close to the reference rendering time with my BVH.

# Are there any known problems/bugs remaining in your code?

(Please provide a list of the problems. If possible, describe what you think the cause is, how you have attempted to diagnose or fix the problem, and how you would attempt to diagnose or fix it if you had more time or motivation. This is important: we are more likely to assign partial credit if you help us understand what's going on.)

The shadings are not perfectly similar to the reference. Especially primitives close to the area light source are not as bright as in the reference (can be seen on the cornel box scenes).
If I would change the distance factor in area light source emission (bounce 0) from distance squared ( 1/(r*r) ) to distance cubed ( 1/(r*r*r) ), the closer primitives would look more like the reference. I did not find a solution for this bug.

# Did you collaborate with anyone in the class?

(Did you help others? Did others help you? Let us know who you talked to, and what sort of help you gave or received.)

# Any other comments you'd like to share about the assignment or the course so far?

(Was the assignment too long? Too hard? Fun or boring? Did you learn something, or was it a total waste of time? Can we do something differently to help you learn? Please be brutally honest; we won't take it personally.)

Fun assignment, I liked 